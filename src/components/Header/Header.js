import Link from 'next/link'
import { useGlitch } from 'react-powerglitch'
import CollapsibleMenu from '../CollapsibleMenu'
import styles from './Header.module.css'

const SvgLogo = (props) => (
  <svg
    xmlns='http://www.w3.org/2000/svg'
    width={48}
    height={48}
    fill='none'
    {...props}
  >
    <g fill='currentColor'>
      <path d='M0 0h48v16.383l-.724.554a400.28 400.28 0 0 0-2.965 2.31c-1.068.838-2.04 1.598-2.965 2.31a97.374 97.374 0 0 1-2.049 1.553l-.295.218c-.653.475-1.052.712-1.18.712-.11 0-.159-.063-.159-.205 0-.38.24-.87.718-1.472a31.7 31.7 0 0 1 1.562-1.819l.18-.188c.501-.526.954-1 1.382-1.425.478-.475.717-.791.717-.918 0-.3-.111-.664-.334-1.107a8.754 8.754 0 0 0-.813-1.298 4.965 4.965 0 0 0-1.1-1.06c-.415-.284-.797-.427-1.18-.427-.096 0-.478.27-1.116.791-.453.383-.98.813-1.578 1.303l-.765.627c-.924.76-1.897 1.582-2.933 2.5-.831.736-1.601 1.432-2.326 2.087l-.527.476-.478.431c-.669.604-1.243 1.122-1.722 1.546-.59.522-.909.807-.94.839-.096.11-.176.095-.224-.048a1.047 1.047 0 0 1-.08-.3c0-.348.208-.791.638-1.345.415-.554.877-1.123 1.371-1.693.228-.262.446-.518.656-.766.246-.29.483-.567.715-.832.43-.49.637-.838.637-1.044 0-.443-.286-.79-.86-1.044-.59-.253-1.323-.38-2.248-.38-.398 0-.94.285-1.578.839-.638.554-1.307 1.281-2.009 2.199a39.718 39.718 0 0 0-2.088 3.069 39.961 39.961 0 0 0-1.88 3.417 27.719 27.719 0 0 0-1.372 3.322c-.366 1.06-.541 1.962-.541 2.706 0 1.297.19 2.23.541 2.815.367.586.718.886 1.1.886.383 0 .638-.063.797-.205.144-.143.224-.27.224-.412 0-.332.334-.933 1.02-1.772a48.264 48.264 0 0 1 2.582-2.879 97.083 97.083 0 0 1 3.395-3.338 167.575 167.575 0 0 1 3.476-3.164 129.498 129.498 0 0 1 2.757-2.373c.75-.617 1.18-.933 1.323-.933a65.242 65.242 0 0 1-1.69 2.753 76.595 76.595 0 0 0-1.865 2.99c-.59.996-1.1 1.93-1.498 2.784-.398.854-.606 1.598-.606 2.199 0 1.297.192 2.23.542 2.816.367.585.718.886 1.1.886.383 0 .638-.064.797-.206.144-.142.223-.269.223-.411 0-.427.287-1.044.861-1.82a32.425 32.425 0 0 1 2.2-2.578 61.61 61.61 0 0 1 2.885-2.864 75.92 75.92 0 0 1 3.396-2.998 91.718 91.718 0 0 1 1.865-1.542c.637-.506 1.004-.76 1.1-.76.127 0-.112.491-.718 1.472-.605.98-1.307 2.262-2.088 3.828a41.193 41.193 0 0 0-2.168 5.268c-.654 1.946-.988 3.892-.988 5.854 0 .6.095 1.123.303 1.566.19.427.446.807.733 1.107.287.317.59.522.892.665.303.142.574.205.814.205.302 0 .637-.094.924-.3a6.64 6.64 0 0 0 1.148-.712c.398-.3.797-.633 1.227-1.013.43-.363.877-.727 1.355-1.107A38.817 38.817 0 0 1 48 37.674V48H0v-3.495c1.011-.44 2.116-1.168 3.311-2.177 1.818-1.534 3.842-3.654 6.09-6.375 2.231-2.721 4.654-5.901 7.237-9.54 2.55-3.607 4.782-6.596 6.679-8.938 1.913-2.341 3.49-4.224 4.75-5.648 1.26-1.423 2.216-2.452 2.837-3.069.622-.617.94-1.012.94-1.139 0-.933-.095-1.724-.286-2.325-.191-.601-.446-1.076-.765-1.392a2.848 2.848 0 0 0-1.1-.68 3.846 3.846 0 0 0-1.275-.206V3h-1.052a52.667 52.667 0 0 0-3.922.285c-1.387.142-2.79.38-4.208.68-1.403.3-2.79.696-4.129 1.186-1.339.49-2.566 1.092-3.65 1.82a11.215 11.215 0 0 0-2.758 2.563 7.396 7.396 0 0 0-1.434 3.338c-.176.901-.144 1.692.095 2.373.223.68.526 1.202.861 1.566.35.38.654.617.925.712.27.095.366.031.302-.206-.366-1.281-.255-2.436.383-3.449.638-1.012 1.578-1.882 2.837-2.61 1.26-.728 2.726-1.329 4.416-1.82 1.69-.49 3.427-.854 5.228-1.09-.35.505-.924 1.407-1.737 2.704a526.477 526.477 0 0 1-2.965 4.588c-1.148 1.756-2.423 3.654-3.794 5.695a298.512 298.512 0 0 1-4.208 6.107A342.17 342.17 0 0 1 5.4 33.264a90.07 90.07 0 0 1-3.794 4.809A33.262 33.262 0 0 1 0 39.852v-6.635a31.991 31.991 0 0 1 1.717-2.232c.813-.949 1.626-1.756 2.423-2.373.797-.617 1.515-.949 2.12-.98.303 0 .51-.254.606-.76.096-.506.128-1.075.096-1.677a11.882 11.882 0 0 0-.207-1.645c-.096-.475-.224-.728-.351-.728-.925 0-1.945.348-3.06 1.06-1.117.712-2.232 1.645-3.316 2.785L0 26.696V0Z' />
      <path d='M48 34.151v-7.026l-.166.222a104.625 104.625 0 0 0-3.013 4.208 31.476 31.476 0 0 0-2.328 4.018c-.605 1.297-.924 2.42-.924 3.37 0 .205.08.285.255.253.175-.032.367-.127.59-.3.223-.175.462-.365.733-.602.271-.237.51-.443.717-.601A78.375 78.375 0 0 1 48 34.152Z' />
    </g>
  </svg>
)

export default function Header({ layout }) {
  const glitch = useGlitch({
    playMode: 'hover'
  })

  return (
    <header className={styles.root}>
      <div className={styles.inner}>
        <div ref={glitch.ref}>
          <Link className={styles.logo} href='/' aria-label="Back to home">
            <SvgLogo />
          </Link>
        </div>
        {layout !== 'home' ? (
          <>
            <CollapsibleMenu>
              <nav role='navigation' className='nav-mobile'>
                <ul>
                  <li>
                    <a href='/#work'>
                      <span>Work</span>
                    </a>
                  </li>
                  <li>
                    <a href='/#projects'>
                      <span>Projects</span>
                    </a>
                  </li>
                  <li>
                    <a href='/#about'>
                      <span>About</span>
                    </a>
                  </li>
                </ul>
              </nav>
            </CollapsibleMenu>
            <nav role='navigation' className='nav-desktop'>
              <ul>
                <li>
                  <Link href='/#work'>
                    <span ref={glitch.ref}>Work</span>
                  </Link>
                </li>
                <li>
                  <Link href='/#projects'>
                    <span ref={glitch.ref}>Projects</span>
                  </Link>
                </li>
                <li>
                  <Link href='/#about'>
                    <span ref={glitch.ref}>About</span>
                  </Link>
                </li>
                <li>
                  <Link href='/resources'>
                    <span ref={glitch.ref}>Resources</span>
                  </Link>
                </li>
              </ul>
            </nav>
          </>
        ) : (
          <>
            <CollapsibleMenu>
              <nav role='navigation' className='nav-mobile'>
                <ul>
                  <li>
                    <a href='#work'>Work</a>
                  </li>
                  <li>
                    <a href='#projects'>Projects</a>
                  </li>
                  <li>
                    <a href='#about'>About</a>
                  </li>
                </ul>
              </nav>
            </CollapsibleMenu>
            <nav role='navigation' className='nav-desktop'>
              <ul>
                <li>
                  <a href='#work'>
                    <span ref={glitch.ref}>Work</span>
                  </a>
                </li>
                <li>
                  <a href='#projects'>
                    <span ref={glitch.ref}>Projects</span>
                  </a>
                </li>
                <li>
                  <a href='#about'>
                    <span ref={glitch.ref}>About</span>
                  </a>
                </li>
              </ul>
            </nav>
          </>
        )}
      </div>
    </header>
  )
}
